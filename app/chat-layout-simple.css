/* Simple chat layout that actually works */

/* Chat container - full viewport height */
.chat-wrapper {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  height: 100vh;
  /* Use regular vh to prevent keyboard resize */
  background: #f9fafb;
  overflow: hidden;
}

/* Header - fixed at top */
.chat-header-section {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  background: white;
  z-index: 50;
  border-bottom: 1px solid #e5e7eb;
}

/* Messages - scrollable with header/input offsets */
.chat-messages-section {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  /* Padding for fixed header - adjust based on actual header height */
  padding-top: calc(56px + env(safe-area-inset-top));
  /* Padding for fixed input */
  padding-bottom: 80px;
}

/* Input - fixed at bottom */
.chat-input-section {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: white;
  border-top: 1px solid #e5e7eb;
  min-height: fit-content;
  /* Will be pushed up by keyboard naturally */
  z-index: 40;
}

/* Safe area handling */
.safe-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}

/* Keep viewport stable when keyboard appears */
.chat-wrapper {
  /* Always use 100vh to prevent resize with keyboard */
  height: 100vh;
}

/* Remove any scroll on body when chat is open */
body:has(.chat-wrapper) {
  overflow: hidden;
  position: fixed;
  width: 100%;
  height: 100%;
}

/* Dynamic header height handling */
.chat-header-section {
  /* Measure the actual height */
  height: fit-content;
}

/* Messages section with dynamic top padding */
.chat-messages-section {
  /* Start below the fixed header */
  padding-top: var(--header-height, 56px);
}

/* Measure and apply header height */
.chat-wrapper {
  --header-height: calc(56px + env(safe-area-inset-top));
}

/* When header has extra content (badge), increase padding */
.chat-header-section:has(> :nth-child(2)) + .chat-messages-section {
  padding-top: calc(96px + env(safe-area-inset-top));
}